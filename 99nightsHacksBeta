local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local hrp = character:WaitForChild("HumanoidRootPart")

-- GUI Setup
local screengui = Instance.new("ScreenGui")
screengui.Name = "ItemCollectorGUI"
screengui.Parent = player:WaitForChild("PlayerGui")

-- Scroll Frame on the left side
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Parent = screengui
scrollFrame.Position = UDim2.new(0.05, 0, 0.1, 0)
scrollFrame.Size = UDim2.new(0, 220, 0.5, 0)
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
scrollFrame.ScrollBarThickness = 8
scrollFrame.BackgroundColor3 = Color3.fromRGB(240, 240, 240)
scrollFrame.BorderSizePixel = 0
scrollFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y

local layout = Instance.new("UIListLayout")
layout.Parent = scrollFrame
layout.Padding = UDim.new(0, 5)
layout.SortOrder = Enum.SortOrder.LayoutOrder

-- Get PrimaryPart of a model
local function getPrimaryPart(model)
	if model.PrimaryPart then
		return model.PrimaryPart
	end
	for _, part in ipairs(model:GetChildren()) do
		if part:IsA("BasePart") then
			model.PrimaryPart = part
			return part
		end
	end
	return nil
end

-- Bring item directly to player and make it fall instantly
local function bringItemToPlayer(itemModel)
	local primaryPart = getPrimaryPart(itemModel)
	if primaryPart then
		-- Enable physics BEFORE teleport
		for _, part in ipairs(itemModel:GetDescendants()) do
			if part:IsA("BasePart") then
				part.Anchored = false
				part.CanCollide = true
			end
		end

		-- Slightly above the ground in front of the player
		local forward = hrp.CFrame.LookVector
		local spawnPosition = hrp.Position + forward * 4
		spawnPosition = Vector3.new(spawnPosition.X, hrp.Position.Y + 1, spawnPosition.Z)

		itemModel:SetPrimaryPartCFrame(CFrame.new(spawnPosition))
	end
end

-- Create buttons for each item
local function createButton(itemName)
	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, 0, 0, 40)
	button.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
	button.TextScaled = true
	button.Font = Enum.Font.FredokaOne
	button.Text = "Bring " .. itemName
	button.Parent = scrollFrame

	button.MouseButton1Click:Connect(function()
		local itemsFolder = workspace:FindFirstChild("Items")
		if itemsFolder then
			local model = itemsFolder:FindFirstChild(itemName)
			if model and model:IsA("Model") then
				bringItemToPlayer(model)
			end
		end
	end)
end

-- List of items
local items = {
	"Berry",
	"Bolt",
	"Broken Fan",
	"Carrot",
	"Chair",
	"Coal",
	"Coin Stack",
	"Log",
	"Item Chest",
	"Sheet Metal"
}

for _, itemName in ipairs(items) do
	createButton(itemName)
end

-- "X" Button to hide/show scroll frame
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(0.05, 190, 0.1, -35)
closeButton.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Font = Enum.Font.FredokaOne
closeButton.Text = "X"
closeButton.TextScaled = true
closeButton.Parent = screengui
closeButton.ZIndex = 2

closeButton.MouseButton1Click:Connect(function()
	scrollFrame.Visible = not scrollFrame.Visible
end)
