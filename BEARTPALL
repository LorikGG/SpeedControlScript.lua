local lorikdakip = game.Players.LocalPlayer
local players = game.Players
local character = lorikdakip.Character or lorikdakip.CharacterAdded:Wait()
local humanoidrootpart = character:WaitForChild("HumanoidRootPart")

-- Get cheese models safely
local cheeseFolder = game.Workspace:WaitForChild("FindCheese")
local function getCheeseModels()
	local cheeseModels = {}
	for _, child in ipairs(cheeseFolder:GetChildren()) do
		if child:IsA("Model") then
			table.insert(cheeseModels, child)
		end
	end
	return cheeseModels
end

-- GUI setup
local screengui = Instance.new("ScreenGui")
screengui.Parent = lorikdakip:WaitForChild("PlayerGui")

-- Button: Start Teleport to Players Loop
local GOtoCOINS = Instance.new("TextButton")
GOtoCOINS.Parent = screengui
GOtoCOINS.Size = UDim2.new(0.277, 0, 0.116, 0)
GOtoCOINS.Position = UDim2.new(0.149, 0, 0.42, 0)
GOtoCOINS.Text = "Start Teleport Loop"
GOtoCOINS.TextScaled = true

-- Button: Teleport to Cheese every 3 sec
local cheeseButton = Instance.new("TextButton")
cheeseButton.Parent = screengui
cheeseButton.Size = UDim2.new(0.277, 0, 0.116, 0)
cheeseButton.Position = UDim2.new(0.149, 0, 0.55, 0)
cheeseButton.Text = "Start Cheese Loop"
cheeseButton.TextScaled = true

-- Button: Toggle UI
local closebutton = Instance.new("TextButton")
closebutton.Parent = screengui
closebutton.Position = UDim2.new(0.4, 0, 0.1, 0)
closebutton.Size = UDim2.new(0.094, 0, 0.094, 0)
closebutton.Text = "Close UI"
closebutton.TextScaled = true

local isUIVisible = true
local isTeleporting = false
local isCheeseLooping = false

-- Toggle UI
closebutton.MouseButton1Click:Connect(function()
	isUIVisible = not isUIVisible
	GOtoCOINS.Visible = isUIVisible
	cheeseButton.Visible = isUIVisible
	closebutton.Text = isUIVisible and "Close UI" or "Open UI"
end)

-- Loop: Teleport to other players
GOtoCOINS.MouseButton1Click:Connect(function()
	isTeleporting = not isTeleporting
	GOtoCOINS.Text = isTeleporting and "Stop Teleport Loop" or "Start Teleport Loop"

	while isTeleporting do
		for _, player in ipairs(players:GetPlayers()) do
			if player ~= lorikdakip and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
				humanoidrootpart.CFrame = player.Character.HumanoidRootPart.CFrame + Vector3.new(0, 1, 0)
				wait(0.5)
			end
		end
	end
end)

-- Loop: Teleport to random cheese model every 3 seconds
cheeseButton.MouseButton1Click:Connect(function()
	isCheeseLooping = not isCheeseLooping
	cheeseButton.Text = isCheeseLooping and "Stop Cheese Loop" or "Start Cheese Loop"

	while isCheeseLooping do
		local cheeseModels = getCheeseModels()
		if #cheeseModels > 0 then
			local randomCheese = cheeseModels[math.random(1, #cheeseModels)]
			local targetPart = randomCheese.PrimaryPart or randomCheese:FindFirstChildWhichIsA("BasePart")
			if targetPart then
				humanoidrootpart.CFrame = targetPart.CFrame + Vector3.new(0, 3, 0)
			end
		end
		wait(3)
	end
end)
